<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>config-reference | Leviathan</title><meta name="description" content="Documentation for Leviathan"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">Leviathan</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">Leviathan</a></li><li><a href="config_reference.html">config-reference</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="md:configjs-reference" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Config.js Reference<a href="#md:configjs-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Create the <code>config.js</code> file in the <code>workspace</code> directory using the <a href="https://github.com/balena-os/leviathan/blob/master/workspace/config.example.js" target="_blank" class="external">config.example.js</a> file. Environment variables referenced in the documentation are merely suggestions. You can technically use hardcoded values, but it is a common practice to get some <code>config.json</code> fields from the environment by setting them to something like <code>process.env.MY_ENV_VAR</code>.</p>
<pre><code class="js"><span class="hl-4">module</span><span class="hl-1">.</span><span class="hl-4">exports</span><span class="hl-1"> </span><span class="hl-3">=</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">deviceType:</span><span class="hl-1"> </span><span class="hl-2">&#39;&lt;DUT device type, for example &quot;raspberrypi3-64&quot;&gt;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">suite:</span><span class="hl-1"> </span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-7">__dirname</span><span class="hl-6">}</span><span class="hl-2">/../suites/&lt;name-of-test-suite&gt;`</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">config:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">networkWired:</span><span class="hl-1"> </span><span class="hl-8">false</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">networkWireless:</span><span class="hl-1"> </span><span class="hl-8">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">downloadVersion:</span><span class="hl-1"> </span><span class="hl-2">&#39;latest&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">balenaApiKey:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">BALENACLOUD_API_KEY</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">balenaApiUrl:</span><span class="hl-1"> </span><span class="hl-2">&#39;balena-cloud.com&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">organization:</span><span class="hl-1"> </span><span class="hl-2">&#39;BALENACLOUD_ORG_GOES_HERE&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">debug:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">unstable:</span><span class="hl-1"> [</span><span class="hl-2">&quot;Kill the device under test&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-7">image</span><span class="hl-1">: </span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-7">__dirname</span><span class="hl-6">}</span><span class="hl-2">/balena.img.gz`</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">workers:</span><span class="hl-1"> [</span><span class="hl-2">&#39;http://&lt;short UUID of your testbot in balenaCloud&gt;.local&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<p>Information on properties in <code>config.js</code>:</p>
<ul>
<li><strong><code>deviceType</code></strong> is the Device Under Test (DUT) attached to the testbot. Example: Raspberrypi3 64-bit device, the <code>deviceType</code> property needs to be <code>raspberrypi3-64</code>.</li>
<li><strong><code>suite</code></strong> is the absolute path to the test suite directory that you want to execute.  As shown in the example above, <code>${__dirname}</code> expands to the absolute path of the <code>workspace</code> directory, so you can use it to specify a path relative to <code>workspace</code>.</li>
<li><strong><code>networkWired</code></strong> and <strong><code>networkWireless</code></strong> properties are configuration for the Network Manager. This sets up the Access Point (AP) created by the testbot for the DUT to use while provisioning.</li>
<li><strong><code>balenaApiKey</code></strong> is the balenaCloud API key of the user running the test. You can generate a new <a href="https://docs.balena.io/learn/manage/account/#api-keys" target="_blank" class="external">balena API key</a> for this field.</li>
<li><strong><code>balenaApiUrl</code></strong> is the balenaCloud environment you are targetting for your test suite. Production is <code>'balena-cloud.com'</code> and staging is <code>'balena-staging.com'</code>.</li>
<li><strong><code>organization</code></strong> is the balenaCloud organization where test applications are created for the cloud suite. Add the <code>username</code> of the user who owns the <code>balenaApiKey</code> - otherwise it will lead to authentication errors. You can find the <code>username</code> of the user from the top right section of the dashboard.</li>
<li><strong><code>debug</code></strong> is where debugging properties are stored for test runs. Check out <a href="debugging.html">Debugging documentation</a> for features you can add.</li>
<li><strong><code>image</code></strong> is the absolute path to the balenaOS image that is flashed onto the Device Under Test (DUT).  As shown in the example above, <code>${__dirname}</code> expands to the absolute path of the <code>workspace</code> directory, so you can use it to specify a path relative to <code>workspace</code>.</li>
</ul>
<p>Make sure to rename the image to balena.img. If you provide <code>balena.img</code> as your balenaOS image, then Leviathan will compress it for you in <code>gz</code> format on runtime. We recommend compressing beforehand, as it saves time. For any reason if your tests download an image already and you don't want to upload an image, then set the <code>image</code> property to <code>false</code> in config.js. Be sure to set <code>image</code> to a boolean <code>false</code> without a quotes.</p>
<p>For example, in the e2e test suite, if you don't upload an image and set <code>image: false</code>, then the test suite will download the image from balenaCloud. This is test specific, not a leviathan feature.</p>
<ul>
<li><strong><code>downloadVersion</code></strong>: If you intend to download a balenaOS version for your tests, then you can use the property to specify the balenaOS version semver. The <code>fetchOS</code> helper will use this property to find and download the balenaOS image.</li>
<li><strong><code>downloadImageType</code></strong>: If you intend to download a balenaOS image type for your tests, that isn't the default image type when downloading from balena cloud. Can be set to <code>raw</code> or <code>flasher</code>, and the <code>fetchOS</code> helper will use this property to download the specified image type. Leave undefined if you want to use the deafult.</li>
<li><strong><code>workers</code></strong> is the property where we specify precisely where the test suites will be executed on and what type of workers are going to be used. You can specify this in multiple ways as per your requirements:</li>
</ul>
<a id="md:different-workers-configurations-available" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Different <code>workers</code> configurations available<a href="#md:different-workers-configurations-available" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li><strong>http://<IP-ADDRESS></strong> - To be used when running tests locally. When you have the autokit in the same network as your laptop/computer then the IP address of the autokit can be provided. This will reduce the dependency on balenaCloud public device URL and make the tests run faster.</li>
</ol>
<pre><code class="js"><span class="hl-10">workers</span><span class="hl-1">: [</span><span class="hl-2">&#39;http://&lt;IP address of your testbot as shown in balenaCloud&gt;&#39;</span><span class="hl-1">],</span>
</code><button type="button">Copy</button></pre>

<ol start="2">
<li><strong>Public device URLs</strong> - If the testbot is not on the same network as you, please enable the public URL in balenaCloud and use that in the <code>workers</code> array. If multiple URLs are provided, then each URL in the array will run the same test suite listed in the <code>config.js</code>.</li>
</ol>
<pre><code class="js"><span class="hl-10">workers</span><span class="hl-1">: [</span><span class="hl-2">&#39;Public URL of your testbot&#39;</span><span class="hl-1">],</span>
</code><button type="button">Copy</button></pre>

<ol start="3">
<li><strong>Workers object for testbot worker</strong> - Using a workers object, you can specify a balenaCloud application containing testbots (connected to DUTs) and a balenaCloud API key. All testbots inside that balenaCloud application can be used to run test suites. These testbots need to be online and contain a <code>DUT</code> tag with the value being the <code>deviceType</code> to be selected for testing. Leviathan looks for all devices inside that balenaCloud application with <code>DUT</code> tag and pushes test jobs to available testbots. This method is often used for testbot rigs in production use cases, with several testbots available as workers to run the tests. Multiple tests can be queued and made to run in parallel on compatible workers.</li>
</ol>
<pre><code class="js"><span class="hl-10">workers</span><span class="hl-1">: {</span><br/><span class="hl-1">   </span><span class="hl-10">balenaApplication</span><span class="hl-1">: </span><span class="hl-2">&#39;some-org/testbot-personal&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">   </span><span class="hl-10">apiKey</span><span class="hl-1">: </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">BALENACLOUD_API_KEY</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<ol start="4">
<li><strong>Specify <code>worker</code> for QEMU worker</strong> - Using the following configuration leviathan will run the test suite on a QEMU worker.</li>
</ol>
<pre><code class="js"><span class="hl-10">workers</span><span class="hl-1">: [</span><span class="hl-2">&#39;http://worker&#39;</span><span class="hl-1">],</span>
</code><button type="button">Copy</button></pre>

<a id="md:configjs-examples" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code>config.js</code> Examples<a href="#md:configjs-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Following is an exhaustive list of <code>config.js</code> examples which can be used for reference.</p>
<br>
<a id="md:running-the-same-test-suite-on-2-separate-workers" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Running the same test suite on 2 separate workers<a href="#md:running-the-same-test-suite-on-2-separate-workers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>You can swap the <code>workers</code> property with any of the alternatives provided above as per your usecase</p>
<pre><code class="js"><span class="hl-4">module</span><span class="hl-1">.</span><span class="hl-4">exports</span><span class="hl-1"> </span><span class="hl-3">=</span><span class="hl-1"> [{</span><br/><span class="hl-1">        </span><span class="hl-5">deviceType:</span><span class="hl-1"> </span><span class="hl-2">&quot;raspberrypi3&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">suite:</span><span class="hl-1"> </span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-7">__dirname</span><span class="hl-6">}</span><span class="hl-2">/../suites/os`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">config:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">networkWired:</span><span class="hl-1"> </span><span class="hl-8">false</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">networkWireless:</span><span class="hl-1"> </span><span class="hl-8">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">downloadVersion:</span><span class="hl-1"> </span><span class="hl-2">&#39;latest&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">balenaApiKey:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">BALENACLOUD_API_KEY</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">balenaApiUrl:</span><span class="hl-1"> </span><span class="hl-2">&#39;balena-cloud.com&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">organization:</span><span class="hl-1"> </span><span class="hl-2">&#39;BALENACLOUD_ORG_GOES_HERE&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">image:</span><span class="hl-1"> </span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-7">__dirname</span><span class="hl-6">}</span><span class="hl-2">/balena.img.gz`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">workers:</span><span class="hl-1"> [</span><span class="hl-2">&#39;https://6ad523252f8288bdff15bda320485237.balena-devices.com/&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-5">deviceType:</span><span class="hl-1"> </span><span class="hl-2">&quot;raspberrypi3&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">suite:</span><span class="hl-1"> </span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-7">__dirname</span><span class="hl-6">}</span><span class="hl-2">/../suites/os`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">config:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">networkWired:</span><span class="hl-1"> </span><span class="hl-8">false</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">networkWireless:</span><span class="hl-1"> </span><span class="hl-8">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">downloadVersion:</span><span class="hl-1"> </span><span class="hl-2">&#39;latest&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">balenaApiKey:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">BALENACLOUD_API_KEY</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">balenaApiUrl:</span><span class="hl-1"> </span><span class="hl-2">&#39;balena-cloud.com&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">organization:</span><span class="hl-1"> </span><span class="hl-2">&#39;BALENACLOUD_ORG_GOES_HERE&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">image:</span><span class="hl-1"> </span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-7">__dirname</span><span class="hl-6">}</span><span class="hl-2">/balena.img.gz`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">workers:</span><span class="hl-1"> [</span><span class="hl-2">&#39;https://123213bda32048sgd5dfw223423723324.balena-devices.com/&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    }]</span>
</code><button type="button">Copy</button></pre>

<a id="md:running-tests-on-the-development-rig" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Running tests on the development rig<a href="#md:running-tests-on-the-development-rig" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In order to kick off tests on multiple workers in the fleet, extend the configuration present below to run your tests on all available workers.</p>
<pre><code class="js"><span class="hl-4">module</span><span class="hl-1">.</span><span class="hl-4">exports</span><span class="hl-1"> </span><span class="hl-3">=</span><span class="hl-1"> [{</span><br/><span class="hl-1">        </span><span class="hl-5">deviceType:</span><span class="hl-1"> </span><span class="hl-2">&quot;DEVICETYPE-1&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">suite:</span><span class="hl-1"> </span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-7">__dirname</span><span class="hl-6">}</span><span class="hl-2">/../suites/YOUR-TEST-SUITE`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">config:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">networkWired:</span><span class="hl-1"> </span><span class="hl-8">false</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">networkWireless:</span><span class="hl-1"> </span><span class="hl-8">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">downloadVersion:</span><span class="hl-1"> </span><span class="hl-2">&#39;latest&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">balenaApiKey:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">BALENACLOUD_API_KEY</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">balenaApiUrl:</span><span class="hl-1"> </span><span class="hl-2">&#39;balena-cloud.com&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">organization:</span><span class="hl-1"> </span><span class="hl-2">&#39;BALENACLOUD_ORG_GOES_HERE&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">image:</span><span class="hl-1"> </span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-7">__dirname</span><span class="hl-6">}</span><span class="hl-2">/balena-DEVICETYPE-1.img.gz`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">workers:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">balenaApplication:</span><span class="hl-1"> </span><span class="hl-2">&#39;testbot-personal&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">apiKey:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">BALENACLOUD_API_KEY</span><span class="hl-1">,</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-5">deviceType:</span><span class="hl-1"> </span><span class="hl-2">&quot;DEVICETYPE-2&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">suite:</span><span class="hl-1"> </span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-7">__dirname</span><span class="hl-6">}</span><span class="hl-2">/../suites/YOUR-TEST-SUITE`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">config:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">networkWired:</span><span class="hl-1"> </span><span class="hl-8">false</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">networkWireless:</span><span class="hl-1"> </span><span class="hl-8">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">downloadVersion:</span><span class="hl-1"> </span><span class="hl-2">&#39;latest&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">balenaApiKey:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">BALENACLOUD_API_KEY</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">balenaApiUrl:</span><span class="hl-1"> </span><span class="hl-2">&#39;balena-cloud.com&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">organization:</span><span class="hl-1"> </span><span class="hl-2">&#39;BALENACLOUD_ORG_GOES_HERE&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">image:</span><span class="hl-1"> </span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-7">__dirname</span><span class="hl-6">}</span><span class="hl-2">/balena-DEVICETYPE-2.img.gz`</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">workers:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">balenaApplication:</span><span class="hl-1"> </span><span class="hl-2">&#39;testbot-personal&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">apiKey:</span><span class="hl-1"> </span><span class="hl-7">process</span><span class="hl-1">.</span><span class="hl-7">env</span><span class="hl-1">.</span><span class="hl-9">BALENACLOUD_API_KEY</span><span class="hl-1">,</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }]</span>
</code><button type="button">Copy</button></pre>

<p>Add more objects to the array for as many workers that you need to target in the development rig to run your tests. Do make sure to specify the balenaOS images or assets correctly needed for each test suite you run for each worker.</p>
<p><code>config.js</code> files are validated using this <a href="https://github.com/balena-os/leviathan/blob/master/client/lib/schemas/multi-client-config.js" target="_blank" class="external">schema</a>. Some properties are optional with the ability to add new properties as required. After adding data to config.js, the properties will be available throughout the execution of the test suite.</p>
<a id="md:environment-variables-reference" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Environment Variables Reference<a href="#md:environment-variables-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To provide values of environment variables for config.js, makefile or for docker-compose, you can create a <code>.env</code> file in the root of the leviathan directory. Below is an exhaustive list of environment variables that can be set <code>.env</code></p>
<table>
<thead>
<tr>
<th>Environment Variable</th>
<th>Description</th>
<th>Example Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>WORKSPACE</code></td>
<td>Path to the workspace directory</td>
<td><code>./workspace</code></td>
</tr>
<tr>
<td><code>REPORTS</code></td>
<td>Path to the reports directory within workspace</td>
<td><code>./workspace/reports</code></td>
</tr>
<tr>
<td><code>SUITES</code></td>
<td>Path to the test suites</td>
<td><code>./path/to/suites</code></td>
</tr>
<tr>
<td><code>DEVICE_TYPE</code></td>
<td>The Device under test - <a href="https://docs.balena.io/reference/hardware/devices/" target="_blank" class="external">slug of the device</a> to be tested.</td>
<td><code>raspberrypi3</code></td>
</tr>
<tr>
<td><code>WORKER_TYPE</code></td>
<td>Type of the worker</td>
<td><code>autokit</code></td>
</tr>
<tr>
<td><code>BALENACLOUD_API_KEY</code></td>
<td>API key for BalenaCloud</td>
<td><code>SAMPLEKEYuhfuwehfewiuf...</code></td>
</tr>
<tr>
<td><code>BALENACLOUD_API_URL</code></td>
<td>API URL for BalenaCloud to reach the API</td>
<td><code>https://api.balena-cloud.com</code></td>
</tr>
<tr>
<td><code>BALENACLOUD_ORG</code></td>
<td>Username for the user owning the API key</td>
<td><code>g_username_of_the_user</code></td>
</tr>
<tr>
<td><code>BALENA_ARCH</code></td>
<td>Architecture of the device you are using as the autokit/testbot</td>
<td><code>amd64</code></td>
</tr>
<tr>
<td><code>BALENACLOUD_APP_NAME</code></td>
<td>Name of the fleet in BalenaCloud hosting all autokits connected to their respective DUTs for testing</td>
<td><code>MyApp</code></td>
</tr>
<tr>
<td><code>BALENACLOUD_SSH_PORT</code></td>
<td>SSH port for BalenaMachine</td>
<td><code>22222</code></td>
</tr>
<tr>
<td><code>BALENACLOUD_SSH_URL</code></td>
<td>SSH URL for BalenaMachine</td>
<td><code>ssh.balena-cloud.com</code></td>
</tr>
<tr>
<td><code>BALENAMACHINE_API_KEY</code></td>
<td>API key for BalenaMachine</td>
<td><code>ANOTHERKEY12345...</code></td>
</tr>
<tr>
<td><code>BALENAMACHINE_API_URL</code></td>
<td>API URL for BalenaMachine</td>
<td><code>https://api.balena-machine.com</code></td>
</tr>
<tr>
<td><code>ENVIRONMENT</code></td>
<td>Specifies the environment (only value: balena-machine)</td>
<td><code>balena-machine</code></td>
</tr>
</tbody>
</table>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:configjs-reference"><span>Config.js <wbr/>Reference</span></a><ul><li><a href="#md:different-workers-configurations-available"><span>Different workers configurations available</span></a></li><li><ul><li><a href="#md:configjs-examples"><span>config.js <wbr/>Examples</span></a></li></ul></li><li><a href="#md:running-the-same-test-suite-on-2-separate-workers"><span>Running the same test suite on 2 separate workers</span></a></li><li><a href="#md:running-tests-on-the-development-rig"><span>Running tests on the development rig</span></a></li><li><a href="#md:environment-variables-reference"><span>Environment <wbr/>Variables <wbr/>Reference</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>Leviathan</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
