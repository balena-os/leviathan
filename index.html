<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Leviathan</title><meta name="description" content="Documentation for Leviathan"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Leviathan</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>Leviathan</h1></div><div class="tsd-panel tsd-typography"><a id="md:leviathan" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Leviathan<a href="#md:leviathan" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p><a href="https://github.com/balena-io/leviathan/issues" target="_blank" class="external"><img src="https://img.shields.io/github/issues/balena-io/leviathan.svg" alt="GitHub Issues"></a>
<a href="https://github.com/balena-io/leviathan/pulls" target="_blank" class="external"><img src="https://img.shields.io/github/issues-pr/balena-io/leviathan.svg" alt="GitHub pull requests"></a>
<a href="https://nodejs.org/download/release/v12.0.0/" target="_blank" class="external"><img src="https://img.shields.io/badge/node-v12.0.0-green.svg" alt="node"></a>
<a href="https://opensource.org/licenses/Apache-2.0" target="_blank" class="external"><img src="https://img.shields.io/badge/license-APACHE%202.0-blue.svg" alt="License"></a>  <a href="https://dashboard.balena-cloud.com/deploy?repoUrl=https://github.com/balena-os/leviathan" target="_blank" class="external"><img src="https://www.balena.io/deploy.svg" alt="balena deploy button"></a></p>
<p>Leviathan can be used to automate, test and control real/virtual devices in production or controlled environments. What can you do:</p>
<ol>
<li>Stress testing the provisioning process for reliability, performance &amp; fault tolerance.</li>
<li>Testing new balenaOS, balenaEngine and balena supervisor on different board revisions, prod/staging environments for managed and unmanaged scenarios.</li>
<li>Automate release deployment for balenaCloud fleets by testing codebase on real/virtual devices under test.</li>
<li>Automate support for new modems, sensors, components and eventually new boards.</li>
</ol>
<p>The high-level overview of the leviathan architecture can be found <a href="media/architecture.md">here</a></p>
<a id="md:getting-started" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Getting Started<a href="#md:getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Leviathan allows for running tests on a device controlled by a worker. A worker is a component that provides an interface to a device under test (DUT). The worker can be either real hardware or a virtualised environment. Leviathan is designed to work with multiple workers. At the moment, leviathan supports the following workers:</p>
<ol>
<li><a href="https://balena-os.github.io/leviathan/pages/Getting-Started/quickstart/quickstart-autokit.html" target="_blank" class="external">autokit</a></li>
<li><a href="https://balena-os.github.io/leviathan/pages/Getting-Started/quickstart/quickstart-qemu.html" target="_blank" class="external">qemu</a></li>
<li>testbot (deprecated)</li>
</ol>
<p>Learn more about <a href="https://balena-os.github.io/leviathan/pages/Getting-Started/learn-more.html" target="_blank" class="external">Leviathan</a>.</p>
<a id="md:clone-the-repository" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Clone the repository<a href="#md:clone-the-repository" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Clone this repository with <code>git clone --recursive</code> or</li>
<li>Run <code>git clone</code> and then <code>git submodule update --init --recursive</code> to install submodules.</li>
</ul>
<a id="md:prerequisites" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Prerequisites<a href="#md:prerequisites" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Install Docker, node and npm in your system. We recommend installing <a href="https://github.com/nvm-sh/nvm#install--update-script" target="_blank" class="external">LTS versions from NVM</a>.</li>
<li>Download the balenaOS image you want to test on your DUT from <a href="https://balena.io/os#download" target="_blank" class="external">balena.io/os</a>.</li>
</ul>
<a id="md:worker-setup" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Worker setup<a href="#md:worker-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Leviathan allows for running tests on a device under test (DUT) connected to and controlled by either a testbot worker, or on a virtualized device using the QEMU worker. Check out the following getting started guides to setup and run each type of worker.</p>
<ol>
<li><a href="https://balena-os.github.io/leviathan/pages/Getting-Started/quickstart/quickstart-testbot.html" target="_blank" class="external">Testbot worker</a></li>
<li><a href="https://balena-os.github.io/leviathan/pages/Getting-Started/quickstart/quickstart-qemu.html" target="_blank" class="external">QEMU worker</a></li>
<li><a href="https://balena-os.github.io/leviathan/pages/Getting-Started/quickstart/quickstart-autokit.html" target="_blank" class="external">Autokit worker</a></li>
</ol>
<a id="md:instructions-for-rig-owners" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Instructions for rig-owners<a href="#md:instructions-for-rig-owners" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Leviathan is made up of a client and worker. The client is the test runner while the worker is where tests get executed. For testbot workers, the worker component exists on the testbot device. The testbot devices are part of a <a href="https://balena.io" target="_blank" class="external">balenaCloud</a> fleet. In order to update the worker component for testbot workers, you need to <a href="https://www.balena.io/docs/learn/deploy/deployment/" target="_blank" class="external">push a new release</a> to the testbot fleet.</p>
<p>To push a new release of leviathan to balenaCloud, use the following command:</p>
<pre><code class="bash"><span class="hl-0">balena</span><span class="hl-1"> </span><span class="hl-2">push</span><span class="hl-1"> </span><span class="hl-3">&lt;</span><span class="hl-2">fleetNam</span><span class="hl-1">e</span><span class="hl-3">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>The <code>&lt;fleetName&gt;</code> is the name of the fleet you intend to push a new version of leviathan to. Keep in mind, the client and the test that run are independent of the worker. Hence, updates to the client or the tests don't need to be pushed to the balenaCloud fleet. In order to change the worker component, you need to push a new release to the balenaCloud fleet.</p>
<a id="md:documentation-for-leviathan-helpers" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Documentation for Leviathan Helpers<a href="#md:documentation-for-leviathan-helpers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Documentation for Leviathan helpers can be found on <a href="https://balena-os.github.io/leviathan" target="_blank" class="external">https://balena-os.github.io/leviathan</a>. To generate the documentation, run the following command from either the root of the repository or the <code>core</code> directory.</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">docs</span>
</code><button type="button">Copy</button></pre>

<p>If the docs are generated successfully, you will be getting the success line as:</p>
<pre><code class="bash"><span class="hl-0">Info:</span><span class="hl-1"> </span><span class="hl-2">Documentation</span><span class="hl-1"> </span><span class="hl-2">generated</span><span class="hl-1"> </span><span class="hl-2">at</span><span class="hl-1"> </span><span class="hl-2">/path/to/documentation</span>
</code><button type="button">Copy</button></pre>

<a id="md:support" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Support<a href="#md:support" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you're having any problem, please <a href="https://github.com/balena-io/leviathan/issues/new" target="_blank" class="external">raise an issue</a> on GitHub and the balena team will be happy to help.</p>
<a id="md:license" class="tsd-anchor"></a><h2 class="tsd-anchor-link">License<a href="#md:license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The project is licensed under the Apache 2.0 license.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:leviathan"><span>Leviathan</span></a><ul><li><a href="#md:getting-started"><span>Getting <wbr/>Started</span></a></li><li><ul><li><a href="#md:clone-the-repository"><span>Clone the repository</span></a></li><li><a href="#md:prerequisites"><span>Prerequisites</span></a></li><li><a href="#md:worker-setup"><span>Worker setup</span></a></li></ul></li><li><a href="#md:instructions-for-rig-owners"><span>Instructions for rig-<wbr/>owners</span></a></li><li><a href="#md:documentation-for-leviathan-helpers"><span>Documentation for <wbr/>Leviathan <wbr/>Helpers</span></a></li><li><a href="#md:support"><span>Support</span></a></li><li><a href="#md:license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>Leviathan</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
